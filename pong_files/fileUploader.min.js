define("fileUploader/components/fileUploader",["santaProps","lodash","reactDOM","core","textCommon","siteUtils"],function(a,b,c,d,e,f){"use strict";var g=d.compMixins;var h=a.Types;var i=f.fileUploadManager;function j(a){var c=b.get(a,["selectedFiles"]);var d=b.get(a,["uploadState"]);return{selectedFiles:c,uploadState:d}}return{displayName:"FileUploader",mixins:[g.skinBasedComp,e.textScaleMixin,g.compStateMixin(j)],statics:{useSantaTypes:true},propTypes:b.assign({compData:a.Types.Component.compData.isRequired,compProp:a.Types.Component.compProp.isRequired,siteMediaToken:h.RendererModel.siteMediaToken.isRequired}),getInitialState:function(){return{selectedFiles:[],uploadState:"before"}},createFileNodes:function(a,c,d,e){var f=b.cloneDeep(this.state.selectedFiles);var g={isPlaceholder:b.isEmpty(f)?a:false,alignment:c,previewState:e,removeFunction:this.removeFileFromList,scale:this.props.structure.layout.scale};if(b.isEmpty(f)){if(!b.isUndefined(e)){f.push({name:"Example.txt"});g.isPlaceholder=false}else{f.push({name:d});if(!a){g.hidePlaceholder=true}}}return b.map(f,function(a,b){return this.createChildComponent({id:"uploadName"+b,fileName:a.name},"wysiwyg.viewer.components.inputs.uploadName","uploadName",g)},this)},removeFileFromList:function(a){var d=b.cloneDeep(this.state.selectedFiles);b.remove(d,"name",a);this.setState({selectedFiles:d});var e=c.findDOMNode(this.refs.fileInput);e.value=""},uploadFiles:function(){this.setState({uploadState:"uploading"});var a=this.refs.fileInput.files[0];var b=function(){this.handleAction(f.constants.ACTION_TYPES.UPLOAD_COMPLETE);this.setState({uploadState:"complete"})}.bind(this);var c=function(a){return a};i.uploadFile(a,this.props.siteMediaToken,this.props.compProp.filesType,b,c)},getSkinProperties:function(){var a=this.props.compData;var c=this.props.compProp;var d={};d[c.buttonAlignment]=true;d["no-label"]=a.buttonLabel==="";var e=this.getComponentPreviewState()||this.props.previewState;var f=!!this.props.compProp.isDisabled;return{"":{},chooseFileButton:{className:this.classSet(d),onClick:function(){if(!f){this.refs.fileInput.click()}}.bind(this),"data-preview":e,"data-disabled":f},buttonLabel:{children:[a.buttonLabel],style:this.getFontSize("btn_fnt")},fileInput:{onChange:function(){this.setState({selectedFiles:b.map(this.refs.fileInput.files,function(a){return{name:a.name,size:a.size}})})}.bind(this)},files:{children:this.createFileNodes(c.showPlaceholder,c.filesAlignment,a.placeholderLabel,e),"data-preview":e}}}}});define("fileUploader/components/uploadName",["santaProps","react","lodash","core","textCommon"],function(a,b,c,d,e){"use strict";var f=d.compMixins;return{displayName:"UploadName",mixins:[f.skinBasedComp,e.textScaleMixin],statics:{useSantaTypes:true},propTypes:c.assign({compData:a.Types.Component.compData.isRequired,compProp:a.Types.Component.compProp.isRequired,alignment:b.PropTypes.string.isRequired,removeFunction:b.PropTypes.func.isRequired,isPlaceholder:b.PropTypes.bool.isRequired,scale:b.PropTypes.number.isRequired}),getSkinProperties:function(){var a=this.props.compData;var b={};b["align-"+this.props.alignment]=true;b["hide-placeholder"]=this.props.hidePlaceholder;var c=!!this.props.compProp.isDisabled;var d=this.getComponentPreviewState()||this.props.previewState;return{"":{className:this.classSet(b),"data-preview":d},"x-icon":{style:this.props.isPlaceholder?{display:"none"}:{},onClick:function(){if(this.props.removeFunction){this.props.removeFunction(a.fileName)}}.bind(this),"data-preview":d,"data-disabled":c},"file-name":{className:this.classSet({"file-name-placeholder":this.props.isPlaceholder}),children:[a.fileName],"data-preview":d,"data-disabled":c,style:this.getFontSize("file_fnt",this.props.scale)}}}}});define("fileUploader",["fileUploader/components/fileUploader","fileUploader/components/uploadName"],function(a,b){"use strict";return{fileUploader:a,uploadName:b}});